{% extends 'teacher/teacherbase.html' %}
{% load widget_tweaks %}
{% block content %}
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  
    <style>
      a:link {
          text-decoration: none;
      }
      .content-box{
        margin: 2rem;
      }
      .sample-button{
        background-color: #337ab7;
        border-radius: 2rem;
        color:white;
      }
      .sample-button:hover{
        border-radius: 2rem;
        color: white;
      }
      .sample-content{
        display: flex;
flex-direction: column;
/* border: 1px solid grey; */
/* border-collapse: collapse; */
      }
      .sample-content-table{
        display: flex;
        width: 40%;
        justify-content: space-between;
        gap:20px;
      }
     </style>
</head>

<div class="content-box">
  <div class="heading">
    <h2>Add Question</h2>
    <hr>
    <h4>You can autofill your already existing questions by uploading a Excel file</h4>
  </div>
  <br>
  <div class="sample-content">

      <div class="sample-content-table">
        <span>
          Check the format of the Excel file to be uploaded
          </span>
        <span style="align-items: left;">
          <a href="{% url 'download-question-file-format' %}">
            File Format
          </a>

        </span>
      </div>
      <div class="sample-content-table">
        <span>
          Check the Sample File below to see how your excel file should be
        </span>
        <a href="{% url 'download-question-file-format' %}">
          <!-- <button type="button"class="btn sample-button" style="border-radius:2px;">Question Format</button> -->
          Sample File
        </a>

      </div>
  </div>
</div>
<div >
  <a href="{% url 'download-sample-question-file' %}" style="text-decoration: none; color: white"><button type="button"class="btn btn-primary" style="border-radius:0px;">Sample File</button></a>
</div>
<form method="POST" id="add_question_file_form" autocomplete="off" style="margin:100px;margin-top: 0px;" enctype="multipart/form-data">
    {%csrf_token%}
    <div class="form-group">
        <label for="uploadFile">file</label>
        <input type="file" name="uploadFile" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" id="uploadFile" required value="Browse"/>
        {% comment %} <input type="file" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" /> {% endcomment %}
        <br>
    </div>
    <button type="submit" class="btn btn-success" style="border-radius:0px;">Upload Questions</button>
  </form>

  

  <script>
    function addCodeToForm() {
        // Append the new input element to the form
       // form.innerHTML += elem;
      const div = document.createElement('div');
      const label = document.createElement('label');
      label.innerHTML = "OPTION";
      div.appendChild(label);

      var inputElem = document.createElement('input');
      inputElem.type = "text";
      inputElem.className="form-control";
      inputElem.name="option";
      inputElem.maxlength="200";
      //inputElem.oninput="createDropdown()";
      inputElem.placeholder = "Example";
      inputElem.required = true;
      inputElem.addEventListener('input', function(event){
        createDropdown();
      })

      div.appendChild(inputElem);

      var btn = document.createElement('button');
      btn.innerHTML = "DELETE";
      btn.addEventListener('click',function(event){deleteCodeFromForm(this)})

      div.appendChild(btn)
      div.appendChild(document.createElement("br"))
      div.appendChild(document.createElement("br"))

      document.getElementById("options").appendChild(div);
      createDropdown()
    }
    
    function deleteCodeFromForm(elem) {
        obj = elem.parentElement
        obj.remove();
        createDropdown();
    }

    function createDropdown() {
      var optionsDiv = document.getElementById("options");
      var dropdown = document.getElementById("dropdown");
  
      // Clear existing options
      dropdown.innerHTML = "<option>Select an option</option>";
  
      // Iterate through child elements of options div and add them to dropdown
      for (var i = 0; i < optionsDiv.children.length; i++) {
          var optionDiv = optionsDiv.children[i];
          //console.log(optionDiv.nodeName);
          if (optionDiv.nodeName == "DIV")
          {
            //console.log(optionDiv.children[0].innerHTML);
            //var optionText = optionDiv.children[0].innerHTML; // Get the text content of the div
            // Create a new option element
            var option = document.createElement("option");
            //option.textContent = optionText;
            option.textContent = optionDiv.children[1].value;
            console.log(option);
            // Append the option to the dropdown
            dropdown.appendChild(option);
          }
      }
      
    }
    createDropdown();
    </script>
<br><br><br>
{% endblock content %}
